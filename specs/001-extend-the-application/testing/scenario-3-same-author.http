# Scenario 3: Add Another Book by Same Author
# User Story: As a reader, I want to add more books by authors I like

### 1. Add "The Lord of the Rings" by J.R.R. Tolkien (same author)
POST http://localhost:8080/api/books/
Authorization: Token YOUR_TOKEN
Content-Type: application/json

{
  "title": "The Lord of the Rings: The Fellowship of the Ring",
  "genre": "fantasy",
  "isbn": "9780547928210", 
  "publication_date": "1954-07-29",
  "description": "The first volume of The Lord of the Rings, following Frodo Baggins as he begins his quest to destroy the One Ring.",
  "author": {
    "name": "J.R.R. Tolkien"
  },
  "reading_status": "want_to_read"
}

### Expected Response:
# Should reuse existing author record (author.id should be 1, same as The Hobbit)
# Author book_count should increase

### 2. Verify author has multiple books
GET http://localhost:8080/api/authors/1/
Authorization: Token YOUR_TOKEN  
Content-Type: application/json

### Expected Response:
# {
#   "id": 1,
#   "name": "J.R.R. Tolkien",
#   "biography": "...",
#   "book_count": 2,  // Should be 2 now
#   "books": [
#     {"id": 1, "title": "The Hobbit"},
#     {"id": 2, "title": "The Lord of the Rings: The Fellowship of the Ring"}
#   ]
# }

### 3. List all books by this author
GET http://localhost:8080/api/books/?author=1
Authorization: Token YOUR_TOKEN
Content-Type: application/json

### 4. Search for books by author name
GET http://localhost:8080/api/books/?search=tolkien
Authorization: Token YOUR_TOKEN
Content-Type: application/json